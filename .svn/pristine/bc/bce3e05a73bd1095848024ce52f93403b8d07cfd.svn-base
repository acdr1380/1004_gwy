<!-- 字典多选 -->
<div class="dictionary">
    <input
        #inputMultipleElement
        class="putt"
        nz-input
        [ngModel]="value"
        [disabled]="disabled"
        [placeholder]="placeholder"
        (click)="evtClick()"
    />
</div>

<!-- 代码项抽屉 -->
<nz-drawer
    nzPlacement="right"
    [nzVisible]="dictionaryDrawerIfy.visible"
    [nzWidth]="dictionaryDrawerIfy.width"
    [nzTitle]="dictionaryDrawerIfy.title"
    (nzOnClose)="dictionaryDrawerIfy.close()"
>
    <div class="drawer_area dic_selector">
        <div class="header">
            <nz-select
                nzAllowClear
                nzShowSearch
                nzServerSearch
                [nzShowArrow]="false"
                nzPlaceHolder="输入查询关键字"
                [style.width]="'100%'"
                [(ngModel)]="dictionaryDrawerIfy.find.keyword"
                (nzOpenChange)="dictionaryDrawerIfy.find.evtOpenChange($event)"
                (nzOnSearch)="dictionaryDrawerIfy.find.evtOnSearch($event)"
                (ngModelChange)="dictionaryDrawerIfy.find.evtChange($event)"
            >
                <ng-container *ngFor="let item of dictionaryDrawerIfy.find.list">
                    <nz-option [nzValue]="item.value" [nzLabel]="item.label"></nz-option>
                </ng-container>
            </nz-select>
        </div>
        <div class="container">
            <div class="layout">
                <!-- <div class="header">
                    <nz-button-group>
                        <button
                            nz-button
                            nzSize="small"
                            (click)="dictionaryDrawerIfy.evtCheckChange(true)"
                        >
                            选中下层
                        </button>
                        <button
                            nz-button
                            nzSize="small"
                            (click)="dictionaryDrawerIfy.evtCheckChange(false)"
                        >
                            取消下层
                        </button>
                        <button nz-button nzSize="small" (click)="dictionaryDrawerIfy.evtReset()">
                            取消所有选中
                        </button>
                    </nz-button-group>
                </div> -->
                <div class="container">
                    <cdk-virtual-scroll-viewport
                        #scrollViewport
                        [itemSize]="32"
                        class="dictionary_tree"
                    >
                        <nz-tree
                            #dictionaryTreeElement
                            nzAsyncData
                            [nzCheckable]="true"
                            [nzCheckStrictly]="true"
                            [nzData]="dictionaryDrawerIfy.tree.nodes"
                            [nzTreeTemplate]="nzTreeTemplate"
                            (nzClick)="dictionaryDrawerIfy.tree.evtActiveNode($event)"
                            (nzCheckBoxChange)="dictionaryDrawerIfy.nzCheckBoxChange($event)"
                            (nzExpandChange)="dictionaryDrawerIfy.tree.evtExpandChange($event)"
                        >
                            <ng-template #nzTreeTemplate let-node>
                                <span
                                    class="custom-node"
                                    [class.active]="
                                        dictionaryDrawerIfy.tree.activedNode?.key === node.key
                                    "
                                >
                                    <i class="fa fa-copy" aria-hidden="true"></i>
                                    <span class="node-text" [attr.title]="node.title">{{
                                        node.title
                                    }}</span>
                                    <span class="selected-level" *ngIf="node.origin?.includeChild"
                                        >已选下层</span
                                    >
                                </span>
                            </ng-template>
                        </nz-tree>
                    </cdk-virtual-scroll-viewport>

                    <ng-template #contextTemplate>
                        <ul nz-menu nzInDropDown>
                            <li nz-menu-item (click)="dictionaryDrawerIfy.evtCheckChange(true)">
                                选中下层
                            </li>
                            <li nz-menu-item (click)="dictionaryDrawerIfy.evtCheckChange(false)">
                                取消下层
                            </li>
                        </ul>
                    </ng-template>
                </div>
            </div>
        </div>
        <div class="footer">
            <nz-button-group>
                <button nz-button nzType="primary" (click)="dictionaryDrawerIfy.evtConfirm()">
                    选择
                </button>
                <button nz-button nzType="default" (click)="dictionaryDrawerIfy.evtEmpty()">
                    清空
                </button>
            </nz-button-group>

            <div class="right">
                <nz-button-group>
                    <button nz-button nzType="default" (click)="dictionaryDrawerIfy.close()">
                        关闭
                    </button>
                </nz-button-group>
            </div>
        </div>
    </div>
</nz-drawer>
