<div class="layout">
    <div class="header handle">
        <span class="item"
            >年份：
            <nz-date-picker
                nzMode="year"
                [nzAllowClear]="false"
                [(ngModel)]="planHandleIfy.year"
                (ngModelChange)="planHandleIfy.yearChange()"
            ></nz-date-picker
        ></span>

        <span class="item"
            >计划名称：<nz-select
                style="min-width: 300px"
                [(ngModel)]="planHandleIfy.planId"
                nzPlaceHolder="请选择计划"
                (ngModelChange)="planHandleIfy.evtModelChange()"
            >
                <ng-container *ngFor="let item of planHandleIfy.list">
                    <nz-option
                        [nzValue]="item.DATA_3001_OTHER_PLAN_ID"
                        [nzLabel]="item.PLAN01"
                    ></nz-option>
                </ng-container>
            </nz-select>
        </span>
    </div>
    <div class="container">
        <div class="left">
            <div class="handle">
                <nz-select
                    style="width: 280px"
                    nzPlaceHolder="输入单位关键字搜索"
                    nzAllowClear
                    nzShowSearch
                    [(ngModel)]="substPersonUnitIfy.find.value"
                    (ngModelChange)="substPersonUnitIfy.find.evtModelChange($event)"
                    (nzOnSearch)="substPersonUnitIfy.find.evtSearch($event)"
                    (nzOpenChange)="substPersonUnitIfy.find.evtOpenChange($event)"
                >
                    <ng-container>
                        <nz-option
                            *ngFor="let item of substPersonUnitIfy.find.list"
                            [nzLabel]="item.BP0106"
                            [nzValue]="item.DATA_3001_UNIT_BP01_ID"
                        >
                        </nz-option>
                    </ng-container>
                </nz-select>
            </div>
            <div class="tree">
                <cdk-virtual-scroll-viewport
                    #scrollViewPersonList
                    [itemSize]="40"
                    class="view_scroll audit_list"
                >
                    <ng-container *ngFor="let item of substPersonUnitIfy.list; let i = index">
                        <div
                            class="item"
                            [class.active]="item === substPersonUnitIfy.selectedItem"
                            (click)="substPersonUnitIfy.evtSelected(item)"
                        >
                            <div class="title">{{ item.BP0106 }}</div>
                        </div>
                    </ng-container>
                </cdk-virtual-scroll-viewport>
            </div>
        </div>
        <div class="right">
            <div class="layout">
                <div class="header handle">
                    <span class="item">
                        <nz-select
                            style="width: 280px"
                            nzPlaceHolder="输入姓名关键字搜索"
                            nzAllowClear
                            nzShowSearch
                            [(ngModel)]="planPsnTableIfy.find.value"
                            (ngModelChange)="planPsnTableIfy.find.evtModelChange($event)"
                            (nzOnSearch)="planPsnTableIfy.find.evtSearch($event)"
                            (nzOpenChange)="planPsnTableIfy.find.evtOpenChange($event)"
                        >
                            <ng-container>
                                <nz-option
                                    *ngFor="let item of planPsnTableIfy.find.list"
                                    [nzLabel]="item.BP0202"
                                    [nzValue]="item.BP0201"
                                >
                                </nz-option>
                            </ng-container>
                        </nz-select>
                    </span>
                    <span class="btns">
                        <button nz-button (click)="downLoadExcelTemp()">下载模板</button>
                        <nz-upload
                            [nzCustomRequest]="planPsnTableIfy.fileCustomRequest"
                            [nzShowUploadList]="false"
                        >
                            <button nz-button>
                                <span><i nz-icon nzType="upload"></i>导入表格</span>
                            </button>
                        </nz-upload>
                        <button nz-button (click)="downLoadTableExcel()">导出表格</button>
                    </span>
                </div>
                <div class="container">
                    <div class="view_scroll table">
                        <nz-table
                            #psnTableTemp
                            nzBordered
                            nzSize="small"
                            [(nzPageSize)]="planPsnTableIfy.pageSize"
                            [(nzPageIndex)]="planPsnTableIfy.pageIndex"
                            [nzData]="planPsnTableIfy.tableData"
                            [nzLoading]="planPsnTableIfy.loading"
                        >
                            <thead>
                                <tr>
                                    <th nzAlign="center">序号</th>
                                    <th nzAlign="center">姓名</th>
                                    <th nzAlign="center">性别</th>
                                    <th nzAlign="center">证件号码</th>
                                    <th nzAlign="center">学历</th>
                                    <th nzAlign="center">联系电话</th>
                                    <th nzAlign="center">是否考录</th>
                                    <th nzAlign="center">是否已备案</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    *ngFor="let data of psnTableTemp.data; let i = index"
                                    [class.active]="data === planPsnTableIfy.selectedRowData"
                                >
                                    <td nzAlign="center">
                                        {{
                                            i +
                                                1 +
                                                (planPsnTableIfy.pageIndex - 1) *
                                                    planPsnTableIfy.pageSize
                                        }}
                                    </td>
                                    <td nzAlign="center">{{ data.BP0202 }}</td>
                                    <td nzAlign="center">{{ data.BP0203_CN }}</td>
                                    <td nzAlign="center">{{ data.BP0201 }}</td>
                                    <td nzAlign="center">{{ data.BP0204_CN }}</td>
                                    <td nzAlign="center">{{ data.BP0211 }}</td>
                                    <td nzAlign="center">{{ data.BP0225_CN }}</td>
                                    <td nzAlign="center">{{ data.BP0226_CN }}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
