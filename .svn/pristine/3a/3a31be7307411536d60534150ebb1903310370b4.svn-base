<ng-template cdk-portal #overlayGlobalTemplate="cdkPortal">
    <div class="lyt_doc">
        <div class="close" (click)="close()"></div>
        <div class="container file_view">
            <ng-container *ngFor="let item of fileList; let i = index">
                <div class="item" [hidden]="i !== selectedIndex" #fileMultiMains>
                    <!-- <div class="item" *ngIf="i === selectedIndex"> -->
                    <ng-container [ngSwitch]="item.filetype">
                        <ng-template [ngSwitchCase]="fileTypeEnum.img">
                            <ng-template
                                [ngTemplateOutlet]="imageViewElement"
                                [ngTemplateOutletContext]="{ config: item }"
                            ></ng-template>
                        </ng-template>
                        <ng-template [ngSwitchCase]="fileTypeEnum.pdf">
                            <ng-template
                                [ngTemplateOutlet]="pdfViewElement"
                                [ngTemplateOutletContext]="{ config: item }"
                            ></ng-template>
                        </ng-template>
                        <ng-template ngSwitchDefault>
                            <b class="error">此文件类型暂未实现预览！</b>
                        </ng-template>
                    </ng-container>
                </div>
            </ng-container>
        </div>
        <div class="footer">
            <div class="operation">
                <ng-container *ngIf="getSelectImage()">
                    <div class="item" title="放大" (click)="plus()">
                        <i class="fa fa-search-plus" aria-hidden="true"></i>
                    </div>
                    <div class="item" title="缩小" (click)="minus()">
                        <i class="fa fa-search-minus" aria-hidden="true"></i>
                    </div>
                    <div class="item" title="左转" (click)="leftRotate()">
                        <i class="fa fa-undo" aria-hidden="true"></i>
                    </div>
                    <div class="item" title="右转" (click)="rightRotate()">
                        <i class="fa fa-repeat" aria-hidden="true"></i>
                    </div>
                </ng-container>
                <div class="item" title="上一个" (click)="last()">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </div>
                <div class="item" title="上一个" (click)="next()">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </div>
                <div class="item" title="下载文件到本地" (click)="down()">
                    <i class="fa fa-download" aria-hidden="true"></i>
                </div>
                <!-- <div class="item" nz-tooltip nzTooltipTitle="可以使用键盘操作。">
                    <i class="fa fa-info" aria-hidden="true"></i>
                </div> -->
            </div>
        </div>
    </div>
</ng-template>

<!-- 图片预览 -->
<ng-template #imageViewElement let-config="config">
    <img [src]="config.resourceUrl" cdkDrag />
</ng-template>

<ng-template #pdfViewElement let-config="config">
    <embed
        class="pdfobject"
        [src]="config.resourceUrl"
        type="application/pdf"
        style="overflow: auto; width: 100%; height: 100%"
    />
</ng-template>
